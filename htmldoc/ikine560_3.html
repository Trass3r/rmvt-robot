<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ikine560_3</title>
  <meta name="keywords" content="ikine560_3">
  <meta name="description" content="IKINE560 Inverse kinematics for Puma 560">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="./m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="./index.html">Home</a> &gt;  <a href="index.html">.</a> &gt; ikine560_3.m</div>

<!--<table width="100%"><tr><td align="left"><a href="./index.html"><img alt="<" border="0" src="./left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for .&nbsp;<img alt=">" border="0" src="./right.png"></a></td></tr></table>-->

<h1>ikine560_3
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="./up.png"></a></h2>
<div class="box"><strong>IKINE560 Inverse kinematics for Puma 560</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="./up.png"></a></h2>
<div class="box"><strong>function theta = ikine560(robot, T,configuration) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="./up.png"></a></h2>
<div class="fragment"><pre class="comment">IKINE560 Inverse kinematics for Puma 560 

    Q = IKINE560(ROBOT, T, CONFIG)

 Solve the inverse kinematics of the Puma-like (spherical wristed) robot 
 ROBOT whose end-effector pose is given by T.

 The optional third argument specifies the configuration of the arm in
 the form of a string containing one or more of the configuration codes:
    'l' or 'r'    lefty/righty
    'u' or 'd'    elbow
    'n' or 'f'    wrist flip or noflip.

 The default configuration is 'lun'.

 REFERENCE:

 Inverse kinematics for a PUMA 560 based on the equations by Paul and Zhang
 From The International Journal of Robotics Research
 Vol. 5, No. 2, Summer 1986, p. 32-44


 AUTHOR:
 Robert Biro        gt2231a@prism.gatech.edu
 with Gary Von McMurray

 GTRI/ATRP/IIMB
 Georgia Institute of Technology
 2/13/95</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="./up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(./matlabicon.gif)">
<li><a href="ishomog.html" class="code" title="function h = ishomog(tr)">ishomog</a>	ISHOMOG Test if argument is a homogeneous transformation</li></ul>
This function is called by:
<ul style="list-style-image:url(./matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="./up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%IKINE560 Inverse kinematics for Puma 560</span>
0002 <span class="comment">%</span>
0003 <span class="comment">%    Q = IKINE560(ROBOT, T, CONFIG)</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% Solve the inverse kinematics of the Puma-like (spherical wristed) robot</span>
0006 <span class="comment">% ROBOT whose end-effector pose is given by T.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% The optional third argument specifies the configuration of the arm in</span>
0009 <span class="comment">% the form of a string containing one or more of the configuration codes:</span>
0010 <span class="comment">%    'l' or 'r'    lefty/righty</span>
0011 <span class="comment">%    'u' or 'd'    elbow</span>
0012 <span class="comment">%    'n' or 'f'    wrist flip or noflip.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% The default configuration is 'lun'.</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% REFERENCE:</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% Inverse kinematics for a PUMA 560 based on the equations by Paul and Zhang</span>
0019 <span class="comment">% From The International Journal of Robotics Research</span>
0020 <span class="comment">% Vol. 5, No. 2, Summer 1986, p. 32-44</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% AUTHOR:</span>
0024 <span class="comment">% Robert Biro        gt2231a@prism.gatech.edu</span>
0025 <span class="comment">% with Gary Von McMurray</span>
0026 <span class="comment">%</span>
0027 <span class="comment">% GTRI/ATRP/IIMB</span>
0028 <span class="comment">% Georgia Institute of Technology</span>
0029 <span class="comment">% 2/13/95</span>
0030 
0031 <span class="comment">% MOD HISTORY</span>
0032 <span class="comment">%  4/99 use new robot object</span>
0033 <span class="comment">%  4/02 tidyup, remove multiple solutions</span>
0034 
0035 <a name="_sub0" href="#_subfunctions" class="code">function theta = ikine560(robot, T,configuration)</a>
0036 
0037     <span class="keyword">if</span> robot.mdh ~= 0,
0038         error(<span class="string">'Solution only applicable for standard DH conventions'</span>);
0039     <span class="keyword">end</span>
0040     L = robot.links;
0041     a1 = L{1}.A;
0042     a2 = L{2}.A;
0043     a3 = L{3}.A;
0044 
0045     d1 = L{1}.D;
0046     d2 = L{2}.D;
0047     d3 = L{3}.D;
0048     d4 = L{4}.D;
0049     
0050 
0051     <span class="keyword">if</span> ~<a href="ishomog.html" class="code" title="function h = ishomog(tr)">ishomog</a>(T),
0052         error(<span class="string">'T is not a homog xform'</span>);
0053     <span class="keyword">end</span>
0054 
0055     <span class="comment">% undo base transformation</span>
0056     T = inv(robot.base) * T;
0057 
0058     <span class="comment">% The following parameters are extracted from the Homogeneous</span>
0059     <span class="comment">% Transformation as defined in equation 1, p. 34</span>
0060 
0061     Ox = T(1,2);
0062     Oy = T(2,2);
0063     Oz = T(3,2);
0064 
0065     Ax = T(1,3);
0066     Ay = T(2,3);
0067     Az = T(3,3);
0068 
0069     Px = T(1,4);
0070     Py = T(2,4);
0071     Pz = T(3,4);
0072 
0073     <span class="comment">% The configuration parameter determines what n1,n2,n4 values are used</span>
0074     <span class="comment">% and how many solutions are determined which have values of -1 or +1.</span>
0075 
0076     <span class="keyword">if</span> nargin &lt; 3,
0077         configuration = <span class="string">''</span>;
0078     <span class="keyword">else</span>
0079         configuration = lower(configuration);
0080     <span class="keyword">end</span>
0081 
0082     <span class="comment">% default configuration</span>
0083 
0084     n1 = -1;    <span class="comment">% L</span>
0085     n2 = -1;    <span class="comment">% U</span>
0086     n4 = -1;    <span class="comment">% N</span>
0087     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'l'</span>)),
0088         n1 = -1;
0089     <span class="keyword">end</span>
0090     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'r'</span>)),
0091         n1 = 1;
0092     <span class="keyword">end</span>
0093     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'u'</span>)),
0094         <span class="keyword">if</span> n1 == 1,
0095             n2 = 1;
0096         <span class="keyword">else</span>
0097             n2 = -1;
0098         <span class="keyword">end</span>
0099     <span class="keyword">end</span>
0100     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'d'</span>)),
0101         <span class="keyword">if</span> n1 == 1,
0102             n2 = -1;
0103         <span class="keyword">else</span>
0104             n2 = 1;
0105         <span class="keyword">end</span>
0106     <span class="keyword">end</span>
0107     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'n'</span>)),
0108         n4 = 1;
0109     <span class="keyword">end</span>
0110     <span class="keyword">if</span> ~isempty(findstr(configuration, <span class="string">'f'</span>)),
0111         n4 = -1;
0112     <span class="keyword">end</span>
0113 
0114 
0115     <span class="comment">%</span>
0116     <span class="comment">% Solve for theta(1)</span>
0117     <span class="comment">%</span>
0118     <span class="comment">% r is defined in equation 38, p. 39.</span>
0119     <span class="comment">% theta(1) uses equations 40 and 41, p.39,</span>
0120     <span class="comment">% based on the configuration parameter n1</span>
0121     <span class="comment">%</span>
0122 
0123     r=sqrt(Px^2 + Py^2);
0124     <span class="keyword">if</span> (n1 == 1),
0125         theta(1)= atan2(Py,Px) + asin(d3/r);
0126     <span class="keyword">else</span>
0127         theta(1)= atan2(Py,Px) + pi - asin(d3/r);
0128     <span class="keyword">end</span>
0129 
0130     <span class="comment">%</span>
0131     <span class="comment">% Solve for theta(2)</span>
0132     <span class="comment">%</span>
0133     <span class="comment">% V114 is defined in equation 43, p.39.</span>
0134     <span class="comment">% r is defined in equation 47, p.39.</span>
0135     <span class="comment">% Psi is defined in equation 49, p.40.</span>
0136     <span class="comment">% theta(2) uses equations 50 and 51, p.40, based on the configuration</span>
0137     <span class="comment">% parameter n2</span>
0138     <span class="comment">%</span>
0139 
0140     V114= Px*cos(theta(1)) + Py*sin(theta(1));
0141     r=sqrt(V114^2 + Pz^2);
0142     Psi = acos((a2^2-d4^2-a3^2+V114^2+Pz^2)/(2.0*a2*r));
0143     theta(2) = atan2(Pz,V114) + n2*Psi;
0144 
0145     <span class="comment">%</span>
0146     <span class="comment">% Solve for theta(3)</span>
0147     <span class="comment">%</span>
0148     <span class="comment">% theta(3) uses equation 57, p. 40.</span>
0149     <span class="comment">%</span>
0150 
0151     num = cos(theta(2))*V114+sin(theta(2))*Pz-a2;
0152     den = cos(theta(2))*Pz - sin(theta(2))*V114;
0153     theta(3) = atan2(a3,d4) - atan2(num, den);</pre></div>
<hr><address>Generated on Sun 18-May-2008 12:02:41 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>