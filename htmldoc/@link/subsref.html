<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of subsref</title>
  <meta name="keywords" content="subsref">
  <meta name="description" content="SUBSREF Reference methods on a LINK object">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="#">@link</a> &gt; subsref.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for ./@link&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>subsref
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>SUBSREF Reference methods on a LINK object</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function v = subsref(l, s) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">SUBSREF Reference methods on a LINK object

    LINK(q)        return link transform (A) matrix

    LINK.alpha    return DH parameters
    LINK.A
    LINK.theta
    LINK.D
    LINK.sigma    return prismatic flag
    LINK.RP        return 'R' or 'P'
    LINK.mdh    0 if standard D&amp;H, else 1

    LINK.offset    return joint variable offset
    LINK.qlim    return joint variable limits [min max]
    LINK.islimit(q)    return if limit is exceeded: -1, 0, +1

    LINK.I        return 3x3 symmetric inertia matrix
    LINK.m        return link mass
    LINK.r        return 3x1 link COG vector

    LINK.G        return gear ratio
    LINK.Jm        return motor inertia
    LINK.B        return viscous friction
    LINK.Tc        return viscous friction

    LINK.dh        return legacy DH row
    LINK.dyn    return legacy DYN row</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="char.html" class="code" title="function s = char(l)">char</a>	CHAR Create string representation of LINK object</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function t = linktran(a, b, c, d)</a></li><li><a href="#_sub2" class="code">function t = mlinktran(a, b, c, d)</a></li></ul>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%SUBSREF Reference methods on a LINK object</span>
0002 <span class="comment">%</span>
0003 <span class="comment">%    LINK(q)        return link transform (A) matrix</span>
0004 <span class="comment">%</span>
0005 <span class="comment">%    LINK.alpha    return DH parameters</span>
0006 <span class="comment">%    LINK.A</span>
0007 <span class="comment">%    LINK.theta</span>
0008 <span class="comment">%    LINK.D</span>
0009 <span class="comment">%    LINK.sigma    return prismatic flag</span>
0010 <span class="comment">%    LINK.RP        return 'R' or 'P'</span>
0011 <span class="comment">%    LINK.mdh    0 if standard D&amp;H, else 1</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%    LINK.offset    return joint variable offset</span>
0014 <span class="comment">%    LINK.qlim    return joint variable limits [min max]</span>
0015 <span class="comment">%    LINK.islimit(q)    return if limit is exceeded: -1, 0, +1</span>
0016 <span class="comment">%</span>
0017 <span class="comment">%    LINK.I        return 3x3 symmetric inertia matrix</span>
0018 <span class="comment">%    LINK.m        return link mass</span>
0019 <span class="comment">%    LINK.r        return 3x1 link COG vector</span>
0020 <span class="comment">%</span>
0021 <span class="comment">%    LINK.G        return gear ratio</span>
0022 <span class="comment">%    LINK.Jm        return motor inertia</span>
0023 <span class="comment">%    LINK.B        return viscous friction</span>
0024 <span class="comment">%    LINK.Tc        return viscous friction</span>
0025 <span class="comment">%</span>
0026 <span class="comment">%    LINK.dh        return legacy DH row</span>
0027 <span class="comment">%    LINK.dyn    return legacy DYN row</span>
0028 
0029 
0030 <span class="comment">% $Log: subsref.m,v $</span>
0031 <span class="comment">% Revision 1.5  2007-01-21 06:25:53  cor134</span>
0032 <span class="comment">% Fixed bug in .dyn method.</span>
0033 <span class="comment">%</span>
0034 <span class="comment">% Revision 1.4  2002/04/14 10:21:54  pic</span>
0035 <span class="comment">% Error if islimit method called with no limits defined.</span>
0036 <span class="comment">%</span>
0037 <span class="comment">% Revision 1.3  2002/04/01 12:04:51  pic</span>
0038 <span class="comment">% General tidyup, comments, clarification, copyright, RCS keys, etc.</span>
0039 <span class="comment">%</span>
0040 <span class="comment">% $Revision: 1.5 $</span>
0041 <span class="comment">% Copyright (C) 1999-2002, by Peter I. Corke</span>
0042 
0043 <a name="_sub0" href="#_subfunctions" class="code">function v = subsref(l, s)</a>
0044     <span class="keyword">if</span> s(1).type  == <span class="string">'()'</span>
0045         <span class="keyword">if</span> l.mdh == 0,
0046             v = <a href="#_sub1" class="code" title="subfunction t = linktran(a, b, c, d)">linktran</a>([l.alpha l.A l.theta l.D l.sigma], <span class="keyword">...</span>
0047                 s(1).subs{1}+l.offset);
0048         <span class="keyword">else</span>
0049             v = <a href="#_sub2" class="code" title="subfunction t = mlinktran(a, b, c, d)">mlinktran</a>([l.alpha l.A l.theta l.D l.sigma], <span class="keyword">...</span>
0050                 s(1).subs{1}+l.offset);
0051         <span class="keyword">end</span>
0052     <span class="keyword">elseif</span> s(1).type  ~= <span class="string">'.'</span>
0053         error(<span class="string">'only .field supported'</span>)
0054     <span class="keyword">else</span>
0055 
0056         <span class="comment">% NOTE WELL:  the following code can't use getfield() since</span>
0057         <span class="comment">% getfield()  uses this, and Matlab will crash!!</span>
0058 
0059         el = <a href="char.html" class="code" title="function s = char(l)">char</a>(s(1).subs);
0060         <span class="keyword">switch</span> el,
0061         <span class="comment">%%%%%%% kinematic parameters</span>
0062         <span class="keyword">case</span> <span class="string">'alpha'</span>,
0063             v = l.alpha;
0064         <span class="keyword">case</span> <span class="string">'A'</span>,
0065             v = l.A;
0066         <span class="keyword">case</span> <span class="string">'theta'</span>,
0067             v = l.theta;
0068         <span class="keyword">case</span> <span class="string">'D'</span>,
0069             v = l.D;
0070         <span class="keyword">case</span> <span class="string">'offset'</span>,
0071             v = l.offset;
0072         <span class="keyword">case</span> <span class="string">'sigma'</span>,
0073             v = l.sigma;
0074         <span class="keyword">case</span> <span class="string">'RP'</span>,
0075             <span class="keyword">if</span> l.sigma == 0,
0076                 v = <span class="string">'R'</span>;
0077             <span class="keyword">else</span>
0078                 v = <span class="string">'P'</span>;
0079             <span class="keyword">end</span>
0080         <span class="keyword">case</span> <span class="string">'mdh'</span>,
0081             v = l.mdh;
0082 
0083         <span class="comment">%%%%%%% joint limit support</span>
0084         <span class="keyword">case</span> <span class="string">'qlim'</span>,
0085             v = l.qlim;
0086         <span class="keyword">case</span> <span class="string">'islimit'</span>,
0087             <span class="keyword">if</span> isempty(l.qlim)
0088                 error(<span class="string">'no limits assigned to link'</span>)
0089             <span class="keyword">end</span>
0090             <span class="keyword">if</span> s(2).type  ~= <span class="string">'()'</span>
0091                 error(<span class="string">'expecting argument for islimit method'</span>);
0092             <span class="keyword">end</span>
0093             q = s(2).subs{1};
0094             v = (q &gt; l.qlim(2)) - (q &lt; l.qlim(1));
0095 
0096         <span class="comment">%%%%%%% dynamic parameters</span>
0097         <span class="keyword">case</span> <span class="string">'G'</span>,
0098             v = l.G;
0099         <span class="keyword">case</span> <span class="string">'I'</span>,
0100             v = l.I;
0101         <span class="keyword">case</span> <span class="string">'r'</span>,
0102             v = l.r;
0103         <span class="keyword">case</span> <span class="string">'Jm'</span>,
0104             v = l.Jm;
0105         <span class="keyword">case</span> <span class="string">'B'</span>,
0106             v = l.B;
0107         <span class="keyword">case</span> <span class="string">'Tc'</span>,
0108             v = l.Tc;
0109 
0110         <span class="keyword">case</span> <span class="string">'m'</span>,
0111             v = l.m;
0112         <span class="comment">%%%%%%% legacy parameters</span>
0113         <span class="keyword">case</span> <span class="string">'dh'</span>,
0114             v = [l.alpha l.A l.theta l.D l.sigma];
0115         <span class="keyword">case</span> <span class="string">'dyn'</span>,
0116             v = [l.alpha l.A l.theta l.D l.sigma l.m l.r(:)' diag(l.I)' l.I(2,1) l.I(2,3) l.I(1,3) l.Jm l.G l.B l.Tc(:)'];
0117         <span class="keyword">otherwise</span>, disp(<span class="string">'Unknown method'</span>)
0118         <span class="keyword">end</span>
0119     <span class="keyword">end</span>
0120 
0121 
0122 <span class="comment">%LINKTRAN    Compute the link transform from kinematic parameters</span>
0123 <span class="comment">%</span>
0124 <span class="comment">%    LINKTRAN(alpha, an, theta, dn)</span>
0125 <span class="comment">%    LINKTRAN(DH, q) is a homogeneous</span>
0126 <span class="comment">%    transformation between link coordinate frames.</span>
0127 <span class="comment">%</span>
0128 <span class="comment">%    alpha is the link twist angle</span>
0129 <span class="comment">%    an is the link length</span>
0130 <span class="comment">%    theta is the link rotation angle</span>
0131 <span class="comment">%    dn is the link offset</span>
0132 <span class="comment">%    sigma is 0 for a revolute joint, non-zero for prismatic</span>
0133 <span class="comment">%</span>
0134 <span class="comment">%    In the second case, q is substitued for theta or dn according to sigma.</span>
0135 <span class="comment">%</span>
0136 <span class="comment">%    Based on the standard Denavit and Hartenberg notation.</span>
0137 
0138 <span class="comment">%    Copyright (C) Peter Corke 1993</span>
0139 <a name="_sub1" href="#_subfunctions" class="code">function t = linktran(a, b, c, d)</a>
0140 
0141     <span class="keyword">if</span> nargin == 4,
0142         alpha = a;
0143         an = b;
0144         theta = c;
0145         dn = d;
0146     <span class="keyword">else</span>
0147         <span class="keyword">if</span> numcols(a) &lt; 4,
0148             error(<span class="string">'too few columns in DH matrix'</span>);
0149         <span class="keyword">end</span>
0150         alpha = a(1);
0151         an = a(2);
0152         <span class="keyword">if</span> numcols(a) &gt; 4,
0153             <span class="keyword">if</span> a(5) == 0,    <span class="comment">% revolute</span>
0154                 theta = b;
0155                 dn = a(4);
0156             <span class="keyword">else</span>        <span class="comment">% prismatic</span>
0157                 theta = a(3);
0158                 dn = b;
0159             <span class="keyword">end</span>
0160         <span class="keyword">else</span>
0161             theta = b;    <span class="comment">% assume revolute if sigma not given</span>
0162             dn = a(4);
0163         <span class="keyword">end</span>
0164     <span class="keyword">end</span>
0165     sa = sin(alpha); ca = cos(alpha);
0166     st = sin(theta); ct = cos(theta);
0167 
0168     t =    [    ct    -st*ca    st*sa    an*ct
0169             st    ct*ca    -ct*sa    an*st
0170             0    sa    ca    dn
0171             0    0    0    1];
0172 
0173 <span class="comment">%MLINKTRAN    Compute the link transform from kinematic parameters</span>
0174 <span class="comment">%</span>
0175 <span class="comment">%    MLINKTRAN(alpha, an, theta, dn)</span>
0176 <span class="comment">%    MLINKTRAN(DH, q) is a homogeneous</span>
0177 <span class="comment">%    transformation between link coordinate frames.</span>
0178 <span class="comment">%</span>
0179 <span class="comment">%    alpha is the link twist angle</span>
0180 <span class="comment">%    an is the link length</span>
0181 <span class="comment">%    theta is the link rotation angle</span>
0182 <span class="comment">%    dn is the link offset</span>
0183 <span class="comment">%    sigma is 0 for a revolute joint, non-zero for prismatic</span>
0184 <span class="comment">%</span>
0185 <span class="comment">%    In the second case, q is substitued for theta or dn according to sigma.</span>
0186 <span class="comment">%</span>
0187 <span class="comment">%    Based on the modified Denavit and Hartenberg notation.</span>
0188 
0189 <span class="comment">%    Copyright (C) Peter Corke 1993</span>
0190 <a name="_sub2" href="#_subfunctions" class="code">function t = mlinktran(a, b, c, d)</a>
0191 
0192     <span class="keyword">if</span> nargin == 4,
0193         alpha = a;
0194         an = b;
0195         theta = c;
0196         dn = d;
0197     <span class="keyword">else</span>
0198         <span class="keyword">if</span> numcols(a) &lt; 4,
0199             error(<span class="string">'too few columns in DH matrix'</span>);
0200         <span class="keyword">end</span>
0201         alpha = a(1);
0202         an = a(2);
0203         <span class="keyword">if</span> numcols(a) &gt; 4,
0204             <span class="keyword">if</span> a(5) == 0,    <span class="comment">% revolute</span>
0205                 theta = b;
0206                 dn = a(4);
0207             <span class="keyword">else</span>        <span class="comment">% prismatic</span>
0208                 theta = a(3);
0209                 dn = b;
0210             <span class="keyword">end</span>
0211         <span class="keyword">else</span>
0212             theta = b;    <span class="comment">% assume revolute if no sigma given</span>
0213             dn = a(4);
0214         <span class="keyword">end</span>
0215     <span class="keyword">end</span>
0216     sa = sin(alpha); ca = cos(alpha);
0217     st = sin(theta); ct = cos(theta);
0218 
0219     t =    [    ct    -st    0    an
0220             st*ca    ct*ca    -sa    -sa*dn
0221             st*sa    ct*sa    ca    ca*dn
0222             0    0    0    1];</pre></div>
<hr><address>Generated on Sun 18-May-2008 12:02:41 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>